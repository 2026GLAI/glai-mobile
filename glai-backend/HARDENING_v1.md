# HARDENING v1 — Backend Constraints

Этот документ фиксирует защитные ограничения backend v1.
Он не добавляет функциональность.
Он ограничивает поведение.

---

## 1. REQUEST LIMITS

- Максимальный размер JSON body: 10 KB
- Только application/json
- Один запрос = одно сообщение

Запросы, выходящие за пределы, отклоняются.

---

## 2. RATE LIMITING (v1)

- Лимит: 30 запросов в минуту на sessionId
- Превышение лимита:
  - запросы отклоняются
  - возвращается стандартная ошибка
- Silent throttling запрещён

---

## 3. SESSION LIMITS

- Максимум активных сессий в памяти: 1000
- При превышении:
  - новые сессии не создаются
  - возвращается ошибка ограничения

---

## 4. FAILURE BEHAVIOR

При любой внутренней ошибке:
- backend не падает
- состояние не повреждается
- возвращается корректное сообщение

---

## 5. SECURITY BASELINE

Backend v1:
- не доверяет клиенту
- не доверяет headers
- не доверяет форматам
- не хранит чувствительные данные

---

## 6. LOGGING

- Логи только server-side
- Логи не влияют на поведение
- Логи не возвращаются клиенту

---

## 7. NON-GOALS (v1)

Hardening v1 НЕ включает:
- auth
- persistence
- encryption beyond HTTPS
- distributed limits
- DDoS protection

---

## 8. FREEZE

Этот документ фиксирует уровень hardening v1.
Любые изменения требуют новой версии.
